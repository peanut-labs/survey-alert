(function(){var e,t,n=function(e,t){return function(){return e.apply(t,arguments)}};t=function(){function e(){}e.extend=function(e,t){var n;for(n in t){if(t.hasOwnProperty(n)){e[n]=t[n]}}return e};return e}();e=function(){function o(){this.handleAlert=n(this.handleAlert,this)}var e,r,i,s;i="PL_Alert";e="/publisher/api/v1/campaigns_summary";r={server:"http://api.peanutlabs.com",alertWidth:450,positionVertical:"bottom",positionHorizontal:"right",hideAfter:10,debugEnabled:false,iframeURL:"",currency_name:"Points",logoURL:"http://ii.peanutlabs.com/PL_Logo.png"};s='#PL_Alert {\n background-color: rgba(237,239,242,.70);\n -webkit-border-radius: 4px;\n -webkit-box-shadow: 0 2px 5px rgba(0,0,0,.1), inset 0 -1px 0 rgba(255,255,255,.15), 0 0 6px rgba(0,0,0,.08), 0 0 0 1px rgba(35,47,64,.5);\n background-image: -webkit-linear-gradient(90deg, rgba(218,223,230,.45) 0%, rgba(218,223,230,0) 100%);\n color: rgba(67,76,89,.9);\n text-shadow: 0 1px 0 rgba(255,255,255,.85);\n font: 12px/1.5 "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", "DejaVu Sans", Verdana, sans-serif;\n position: absolute;\n overflow:hidden;\n}\n\n#PL_Alert > div {\n border: none;\n background-color: rgba(255,255,255,.15);\n -webkit-border-radius: 4px;\n -webkit-box-shadow: inset 0 1px 0 rgba(255,255,255,.55);\n background: -webkit-linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,.75) 100%);\n height: 100%;\n width:100%;\n display: table;\n}\n\n#PL_Alert >div >div {\n border: none;\n background-color: rgba(255,255,255,.15);\n -webkit-border-radius: 4px;\n -webkit-box-shadow: inset 0 -3px 2px rgba(58,71,89,.04);\n overflow: hidden;\n position: relative;\n display: table-row;\n}\n\n#PL_Alert :hover {\n border-color: rgba(0,0,0,1);\n background-color: rgba(237,239,242,1);\n cursor:pointer;\n}\n\n#PL_Alert_icon {\n padding: 15px;\n display: table-cell;\n vertical-align: top;\n text-align: center;\n min-width: 48px;\n width: auto;\n min-height: 100%;\n height: 100%;\n border-bottom-left-radius: 4px;\n border-bottom-right-radius: 0;\n border-top-left-radius: 4px;\n border-top-right-radius: 0px;\n background-repeat: no-repeat;\n background-position: center center;\n background-color: rgba(26,57,102,.05);\n -webkit-box-shadow: 1px 0 0 rgba(255,255,255,.35), inset -1px 0 0 rgba(58,71,89,.1);\n background-image: none !important;\n}\n\n#PL_Alert_icon img {\n min-width: 48px;\n min-height: 48px;\n max-width: 256px;\n max-height: 256px;\n vertical-align: top;\n margin: 0;\n padding: 0;\n float: left;\n border-radius: 3px;\n}\n\n#PL_Alert_content {\n display: table-cell;\n vertical-align: top;\n padding: 10px 15px;\n}\n\n#Peanut_id_hide {\n position: absolute;\n right:8px;\n top:6px;\n font-size: 12px;\n z-index: 999;\n display: none;\n opacity: 0.8;\n}\n\n#PL_Alert:hover #Peanut_id_hide{\n display: block;\n}\n\n#PL_Alert_content_title {\n color: rgba(67,76,89,.9);\n font-size: 12px;\n margin: 5px 0 0 0px;\n}\n\nPL_Alert_content_body {\n margin: 5px 10px 5px 0px;\n}\n\n#PL_Alert a, #PL_Alert a:active{\n background: none;\n font-weight: bold;\n color:rgba(67,76,89,.9);\n text-decoration:none;\n}\n\n#PL_Alert a:hover{\n background: none;\n color:rgba(0,0,0,0.81);\n text-decoration:none;\n}';o.prototype.initialize=function(e){e||(e={});this.ops=this.options=t.extend(r,e);if(this.validated()){return this.sendRequest()}};o.prototype.validated=function(){if(!(this.ops.userId.indexOf("-")>=0)){this.printDebug("Invalid Parameter: userId");return false}if(!(this.ops.iframeURL.indexOf("http")>=0)){this.printDebug("Invalid Parameter: iframeURL");return false}return true};o.prototype.sendRequest=function(){var e,t;t=document.createElement("script");t.src=this.getAPIUrl();e=document.getElementsByTagName("head")[0];return e.appendChild(t)};o.prototype.getAPIUrl=function(){return""+this.ops.server+e+"?user_id="+this.ops.userId+"&jsonp=PeanutLabsAlert.handleAlert"};o.prototype.canShowAlert=function(e){return e.surveys.status==="profiled"&&e.surveys.count>0||e.surveys.status==="profiler_available"};o.prototype.handleAlert=function(e){e.surveys||(e.surveys={});if(!this.canShowAlert(e)){return false}this.response=e;return this.showAlert()};o.prototype.getContent=function(){var e,t;e={};if(this.response.surveys.status==="profiled"){e={title:"You have surveys waiting for you!",body:"You qualify for "+this.response.surveys.count+" survey"+((t=this.response.surveys.count>1?"s":void 0)!=null?t:"")+". Earn up to "+this.response.surveys.total_reward+" "+this.options.currency_name+"!",footer:""}}else{e={title:"Profile and earn!",body:"Earn Mo money"}}return e};o.prototype.showAlert=function(){var e,t,n;n=document.createElement("style");n.innerHTML=s;document.getElementsByTagName("head")[0].appendChild(n);t=document.createElement("div");t.id=i;t.style.zIndex=1e5;t.style.position="fixed";t.style.padding="0px";t.style.paddingLeft="0px";t.style.paddingTop="0px";t.style.width=""+this.ops.alertWidth+"px";t.style[this.ops.positionVertical]=25;t.style[this.ops.positionHorizontal]=25;t.onmouseover=function(e){return function(){return clearTimeout(e.hideTimer)}}(this);t.onmouseout=function(e){return function(){return e.scheduleHideAlert()}}(this);e=this.getContent();t.innerHTML=this.alertTplNew(e.title,e.body,e.footer);document.getElementsByTagName("body")[0].appendChild(t);t.className="notification";document.getElementById("Peanut_id_hide").onclick=function(e){return function(){return e.hideAlert()}}(this);this.slideDistance=-1*t.clientHeight;return this.animateIn(t,this.slideDistance,25,function(e){return function(){return e.scheduleHideAlert()}}(this))};o.prototype.animate=function(e,t,n,r,i){var s;if(r==="in"&&t>=n||r==="out"&&n>=t){if(i){i()}return}e.style[this.ops.positionVertical]=""+t+"px";if(r==="in"){s=t+25}else{s=t-25}return setTimeout(function(t){return function(){return t.animate(e,s,n,r,i)}}(this),25)};o.prototype.animateIn=function(e,t,n,r){return this.animate(e,t,n,"in",r)};o.prototype.animateOut=function(e,t,n,r){return this.animate(e,t,n,"out",r)};o.prototype.scheduleHideAlert=function(){return this.hideTimer=setTimeout(function(e){return function(){return e.hideAlert()}}(this),this.ops.hideAfter*1e3)};o.prototype.hideAlert=function(){var e;clearTimeout(this.hideTimer);e=this.getAlertElement();return this.animateOut(e,0,this.slideDistance,function(t){return function(){return e.parentNode.removeChild(e)}}(this))};o.prototype.getAlertElement=function(){return document.getElementById(i)};o.prototype.alertTplNew=function(e,t,n){var r;return r='<a class="close" href="javascript: void(0);" id="Peanut_id_hide">&times;</a>\n<div>\n  <div>\n  	<span id="PL_Alert_icon"> <img width="128" alt="icon" src="'+this.ops.logoURL+'"></span>\n    	<div id="PL_Alert_content">\n        <h1 id="PL_Alert_content_title">'+e+'</h1>\n        <p id="PL_Alert_content_body">'+t+' <a href="'+this.ops.iframeURL+'">Click here</a></p>\n      </div>\n  </div>\n</div>'};o.prototype.printDebug=function(e){if(!this.ops.debugEnabled){return}return console.log("Debug Msg: "+e)};return o}();window.PeanutLabsAlert=new e}).call(this)